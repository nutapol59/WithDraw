

<div class="row">
	<div class="col-md-12">
		<fieldset class="col-md-offset-1 col-md-9 fieldset">
			<legend>&nbsp;ตารางสรุปผล&nbsp;</legend>
			<div class="row">
				<div class="col-md-offset-1 col-md-10">
					<table class="table table-hover">
						<thead>
							<th>Action</th>
							<th>วันที่</th>
							<th>ลูกค้า</th>
							<th>เดินทางจาก</th>
							<th>เดินทางถึง</th>
							<th>ค่าเดินทาง</th>
							<th>ค่าทางด่วน</th>
							<th>รวมเป็นเงิน</th>
							<th>หมายเหตุ</th>
							

						</thead>
						<tbody>
							<tr *ngFor="let travelExpenseDetail of travelExpenseDetails">
								<td><button (click)="deleteTravelExpenseDetail(travelExpenseDetail)" class="btn btnEdit btn-raised btn-danger"><i class="fa fa-trash-o fa-2x" aria-hidden="true"></i></button>
									<button class="btn btnEdit btn-raised btn-info" data-backdrop="static" data-keyboard="false" 
												data-target="#modalUpdateTravelExpenseDetail" data-toggle="modal"
												(click)="detailModalUpdate(travelExpenseDetail)"><i class="fa fa-pencil-square-o fa-2x" aria-hidden="true"></i></button>
								</td>
								<td>{{travelExpenseDetail.travelDate | date:'yyyy-MM-dd'	}}</td>
								<td>{{travelExpenseDetail.customer.name}}</td>
								<td>{{travelExpenseDetail.travelFrom}}</td>
								<td>{{travelExpenseDetail.travelTo}}</td>
								<td>{{travelExpenseDetail.expense}}</td>
								<td>{{travelExpenseDetail.expWayExpense}}</td>
								<td>{{travelExpenseDetail.expenseSubSummary}}</td>
								<td>{{travelExpenseDetail.comment}}</td>
								
							</tr>
						</tbody>
					</table>	
				</div>
				
			</div>
			<div class="row">
				<div class="col-md-12">
					<!--<center>-->
						<input (click)="gotoListSentApprove()" class="btn btn-raised btn-success" type="submit" name="summary" value="บันทึกแบบคำขอใบเบิก"/>
					<!--</center>-->
				</div>
			</div>
		</fieldset>
	</div>
</div>





<div class="modal fade modal-lg" id="modalAddTravelExpenseDetail">
	<div class="modal-dialog modal-lg">
		
		<div class="modal-content modal-lg">
			<div class="modal-header">
				<button (click)="onClear()" type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h4 class="modal-title">กรณีไปหาลูกค้า</h4>
			</div>
			<div class="modal-body modal-lg">
				<div class="row">
					<div class="col-md-12">
						<div class="row">
							<div class="col-md-offset-1 col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">วันที่</label>
									<div class="col-md-9 nopadding-left-right">
										<!--<input type="date" class="form-control" #travelDate [(ngModel)]="travelExpenseDetail.travelDate" [ngModelOptions]="{standalone: true}" />-->
										<my-date-picker #travelDate name="datepicker" [(ngModel)]="travelExpenseDetail.travelDate" [ngModelOptions]="{standalone: true}" class="form-control" 
										[options]="myDatePickerOptions" (dateChanged)="onDateChanged($event)" ></my-date-picker>

									</div>
										<!--<ng2-datepicker style="width:300px !important;" #travelDate [(ngModel)]="travelExpenseDetail.travelDate" [ngModelOptions]="{standalone: true}"></ng2-datepicker>-->
										<!--<material-datepicker class="form-control" [(date)]="travelExpenseDetail.travelDate"></material-datepicker>-->
								</div>
									
							</div>
						
							<div class="col-md-5   nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-2 nopadding-left-right controlLabel">ลูกค้า</label>
									<div class="col-md-10 nopadding-left-right">
										<select #customer [(ngModel)]="travelExpenseDetail.customer" [ngModelOptions]="{standalone: true}" class="form-control">
											<option *ngFor="let customer of customers" [value]="customer.id">
												{{customer.name}}
											</option>

										</select>
									</div>
								</div>
							</div>		
						</div>
						<div class="row">
							<div class="col-md-offset-1 col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">เดินทางจาก</label>
									<div class="col-md-9 nopadding-left-right">
										<input #travelFrom class="form-control" type="text" 
										[(ngModel)]="travelExpenseDetail.travelFrom" [ngModelOptions]="{standalone: true}">
									</div>
								</div>
							</div>

							<div class="col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-2 nopadding-left-right controlLabel">ถึง</label>
									<div class="col-md-10 nopadding-left-right">
										<input #travelTo class="form-control" type="text"
										[(ngModel)]="travelExpenseDetail.travelTo" [ngModelOptions]="{standalone: true}">
									</div>
								</div>
							</div>				
						</div>

						<div class="row">
							<div class="col-md-offset-1 col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">ค่าเดินทาง</label>
									<div class="col-md-7 nopadding-left-right">
										<input #expense class="form-control" type="number" min="0" 
										[(ngModel)]="travelExpenseDetail.expense" (keypress)="validateNegative($event)">
									</div>
									<label for="" class="col-md-1 nopadding-left-right label-center">บาท</label>
								</div>
							</div>

							<div class="col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">ค่าทางด่วน</label>
									<div class="col-md-8 nopadding-left-right">
										<input #expWayExpense class="form-control" type="text" min="0" 
										[(ngModel)]="travelExpenseDetail.expWayExpense" (keypress)="validateNegative($event)" />
									</div>
									<label for="" class="col-md-1 nopadding-left-right label-center">บาท</label>
								</div>
							</div>				
						</div>

						<div class="row">
							<div class="col-md-offset-1 col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">ยอดเงินรวม</label>
									<div class="col-md-7 nopadding-left-right">
										<input #expenseSubSummary class="form-control" type="text" 
										[(ngModel)]="travelExpenseDetail.expenseSubSummary" [ngModelOptions]="{standalone: true}">
									</div>
									<label for="" class="col-md/td>
								<td>{{travelExpenseDetail.travelFrom}}</td>
								<td>{{travelExp-1 nopadding-left-right label-center">บาท</label>
								</div>
							</div>

							<div class="col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">หมายเหตุ</label>
									<div class="col-md-9 nopadding-left-right">
										<input #comment class="form-control" type="text"
										[(ngModel)]="travelExpenseDetail.comment" [ngModelOptions]="{standalone: true}">
									</div>
									
								</div>
							</div>				
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row">
					<div class="col-md-offset-8 col-md-3">
						<div class="form-group">
							<button (click)="onClear()" type="button" class="btn btn-default" data-dismiss="modal" >Close</button>
							<button (click)="addTravelExpenseDetail()" data-dismiss="modal" class="btn btn-raised btn-inverse" type="submit" name="submit">เพิ่ม</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>





<!--Update TravelExpenseDetail-->
<div class="modal fade modal-lg" id="modalUpdateTravelExpenseDetail">
	<div class="modal-dialog modal-lg">
		
		<div class="modal-content modal-lg">
			<div class="modal-header">
				<button (click)="onClearUpdate(travelDate,customer,travelFrom,travelTo,expense,expWayExpense,expenseSubSummary,comment)" type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h4 class="modal-title">กรณีไปหาลูกค้า</h4>
			</div>
			<div class="modal-body modal-lg">
				<div class="row">
					<div class="col-md-12">
						<div class="row">
							<div class="col-md-offset-1 col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">วันที่</label>
									<div class="col-md-9 nopadding-left-right">
										<!--<input type="date" class="form-control" #travelDate [value]="travelExpenseDetail.travelDate" />-->
										<my-date-picker #travelDate [ngModel]="travelExpenseDetail.travelDate" [options]="myDatePickerOptions" (dateChanged)="onDateChangedUpdate($event)" ></my-date-picker>
										<!--<ng2-datepicker  #travelDate [(ngModel)]="dateUpdate" [ngModelOptions]="{standalone: true}"></ng2-datepicker>-->
										
									</div>
									
								</div>
							</div>

							<div class="col-md-5   nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-2 nopadding-left-right controlLabel">ลูกค้า</label>
									<div class="col-md-10 nopadding-left-right">
										<select #customer [(ngModel)]="customerIdUpdate" [ngModelOptions]="{standalone: true}"
											class="form-control" (change)="onSelectboxChange($event.target.value)">
											<option *ngFor="let customer of customers" [value]="customer.id">
												{{customer.name}}
											</option>

										</select>
									</div>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-md-offset-1 col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">เดินทางจาก</label>
									<div class="col-md-9 nopadding-left-right">
										<input #travelFrom class="form-control" type="text" 
										[value]="travelExpenseDetail.travelFrom">
									</div>
								</div>
							</div>

							<div class="col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label  class="col-md-2 nopadding-left-right controlLabel">ถึง</label>
									<div class="col-md-10 nopadding-left-right">
										<input #travelTo class="form-control" type="text"
										[value]="travelExpenseDetail.travelTo">
									</div>
								</div>
							</div>				
						</div>

						<div class="row">
							<div class="col-md-offset-1 col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">ค่าเดินทาง</label>
									<div class="col-md-7 nopadding-left-right">
										<input #expense class="form-control" type="number" min="0" 
										[value]="travelExpenseDetail.expense" (keypress)="validateNegative($event)">
									</div>
									<label for="" class="col-md-1 nopadding-left-right label-center">บาท</label>
								</div>
							</div>

							<div class="col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">ค่าทางด่วน</label>
									<div class="col-md-8 nopadding-left-right">
										<input #expWayExpense class="form-control" type="text" min="0" 
										[value]="travelExpenseDetail.expWayExpense" (keypress)="validateNegative($event)" />
									</div>
									<label for="" class="col-md-1 nopadding-left-right label-center">บาท</label>
								</div>
							</div>				
						</div>

						<div class="row">
							<div class="col-md-offset-1 col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">ยอดเงินรวม</label>
									<div class="col-md-7 nopadding-left-right">
										<input #expenseSubSummary class="form-control" type="text" 
										[value]="travelExpenseDetail.expenseSubSummary">
									</div>
									<label for="" class="col-md-1 nopadding-left-right label-center">บาท</label>
								</div>
							</div>

							<div class="col-md-5 nopadding-left-right">
								<div class="form-group ">
									<label for="" class="col-md-3 nopadding-left-right controlLabel">หมายเหตุ</label>
									<div class="col-md-9 nopadding-left-right">
										<input #comment class="form-control" type="text"
										[value]="travelExpenseDetail.comment">
									</div>
									
								</div>
							</div>				
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<div class="row">
					<div class="col-md-offset-8 col-md-3">
						<div class="form-group">
							<button (click)="onClearUpdate(travelDate,customer,travelFrom,travelTo,expense,expWayExpense,expenseSubSummary,comment)" type="button" class="btn btn-default" data-dismiss="modal" >Close</button>
							<button (click)="updateTravelExpenseDetail(travelDate,customer,travelFrom,travelTo,expense,expWayExpense,expenseSubSummary,comment)" data-dismiss="modal" class="btn btn-raised btn-inverse" type="submit" name="submit">เพิ่ม</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
